package de.fh.dortmund.pineappleducks.login;

import de.fh.dortmund.pineappleducks.entity.User;
import de.fh.dortmund.pineappleducks.manager.UserManager;

import javax.ejb.Stateless;

@Stateless
public class LoginBean implements LoginBeanRemote, LoginBeanLocal{

    public RegisterBean () { }

    @Override
    public String persist ( String login, String password) {
        UserManager manager = new UserManager();
        User savedUser = manager.getUserByNameAndPassword(login, password);
        if(savedUser.getUsername().equals(login)
                && savedUser.getPassword().equals(password)){
            Gson gson = new Gson();
            String loginString = gson.toJson(savedUser);
            return loginString;
        }else {
            throw new RuntimeException("Es ist ein Fehler bei der Persistenz aufgetreten!");
        }
    }
}